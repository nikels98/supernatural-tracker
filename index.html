<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Supernatural Episoden-Tracker</title>
<style>
  body{background:#0c0f19;color:#eee;font-family:sans-serif;margin:0;padding:0;}
  header{position:sticky;top:0;background:#111;padding:10px;border-bottom:1px solid #333;z-index:10;}
  h1{margin:0;font-size:20px}
  .summary{display:flex;gap:20px;flex-wrap:wrap;font-size:14px;margin-top:4px;}
  .summary div{background:#222;padding:6px 10px;border-radius:6px;}
  .season{margin:12px;}
  details{margin-bottom:10px;border:1px solid #333;border-radius:8px;overflow:hidden;}
  summary{background:#222;padding:8px 12px;cursor:pointer;font-weight:bold;}
  table{width:100%;border-collapse:collapse;}
  th,td{border:1px solid #333;padding:6px;text-align:left;font-size:14px;}
  tr.best{background:#153a22;}
  tr.best td{border-color:#2f7a52;}
  .ok{color:#41d392;font-weight:bold;}
</style>
</head>
<body>
<header>
  <h1>Supernatural Episoden-Tracker</h1>
  <div class="summary">
    <div id="sel">Auswahl: 0 Folgen (0h)</div>
    <div id="all">Alle: 0 Folgen (0h)</div>
    <div id="left">Übrig: 0h</div>
  </div>
</header>
<div id="content"></div>
<script>
const avgMin = 42;
const data = {
  1:22,2:22,3:16,4:22,5:22,6:22,7:23,8:23,9:23,10:23,11:23,12:23,13:23,14:20,15:20
};
const bestOf = new Set([
  "1x01","1x09","1x16","1x19","1x21","1x22",
  "2x01","2x10","2x14","2x15","2x18","2x20","2x21","2x22",
  "3x01","3x03","3x11","3x12","3x13","3x16",
  "4x01","4x03","4x06","4x07","4x08","4x09","4x10","4x18","4x20","4x21","4x22",
  "5x01","5x03","5x04","5x08","5x09","5x10","5x13","5x20","5x21","5x22",
  "6x01","6x03","6x05","6x07","6x09","6x10","6x15","6x17","6x18","6x20","6x21","6x22",
  "7x01","7x02","7x10","7x17","7x21","7x23",
  "8x01","8x02","8x07","8x08","8x10","8x12","8x13","8x14","8x17","8x19","8x21","8x22","8x23",
  "9x01","9x03","9x04","9x06","9x09","9x10","9x11","9x16","9x18","9x21","9x22","9x23",
  "10x05","10x14","10x22","10x23",
  "11x04","11x10","11x20","11x23",
  "12x01","12x12","12x22","12x23",
  "13x01","13x16","13x23",
  "14x10","14x13","14x20",
  "15x01","15x18","15x19","15x20"
]);
const titles = {
 "1x01":"Pilot","1x09":"Home","1x16":"Shadow","1x19":"Provenance","1x21":"Salvation","1x22":"Devil's Trap",
 "2x01":"In My Time of Dying","2x22":"All Hell Breaks Loose II",
 "3x16":"No Rest for the Wicked","4x01":"Lazarus Rising","4x22":"Lucifer Rising",
 "5x01":"Sympathy for the Devil","5x22":"Swan Song",
 "6x01":"Exile on Main Street","7x01":"Meet the New Boss",
 "8x01":"We Need to Talk About Kevin","9x23":"Do You Believe in Miracles",
 "15x20":"Carry On"
};
function loadProgress(){ return JSON.parse(localStorage.getItem("spn-progress")||"{}"); }
function saveProgress(p){ localStorage.setItem("spn-progress",JSON.stringify(p)); }
const progress=loadProgress();
const content=document.getElementById("content");
let totalAll=0,totalSel=0;
for(let s=1;s<=15;s++){
  let epCount=data[s];
  let det=document.createElement("details");
  if(s===1) det.open=true;
  let sum=document.createElement("summary");
  sum.textContent="Staffel "+s+" ("+epCount+" Folgen)";
  det.appendChild(sum);
  let tbl=document.createElement("table");
  let head=document.createElement("tr");
  head.innerHTML="<th>✔</th><th>Episode</th><th>Titel</th><th>Gesehen</th>";
  tbl.appendChild(head);
  for(let i=1;i<=epCount;i++){
    let code=s+"x"+String(i).padStart(2,"0");
    let tr=document.createElement("tr");
    if(bestOf.has(code)) tr.classList.add("best");
    let seen=progress[code]||false;
    if(bestOf.has(code)) totalSel++;
    totalAll++;
    let td0=document.createElement("td");td0.textContent=bestOf.has(code)?"✔":"";
    let td1=document.createElement("td");td1.textContent=code;
    let td2=document.createElement("td");td2.textContent=titles[code]||"—";
    let td3=document.createElement("td");
    let cb=document.createElement("input");cb.type="checkbox";cb.checked=seen;
    cb.onchange=()=>{progress[code]=cb.checked;saveProgress(progress);updateSummary();};
    td3.appendChild(cb);
    tr.appendChild(td0);tr.appendChild(td1);tr.appendChild(td2);tr.appendChild(td3);
    tbl.appendChild(tr);
  }
  det.appendChild(tbl);
  content.appendChild(det);
}
function updateSummary(){
  let seenCount=0,seenBest=0;
  for(let k in progress){ if(progress[k]){ seenCount++; if(bestOf.has(k)) seenBest++; } }
  let leftSel=totalSel-seenBest;
  let leftAll=totalAll-seenCount;
  document.getElementById("sel").innerHTML="Auswahl: "+totalSel+" Folgen ("+Math.round(totalSel*avgMin/60)+"h)";
  document.getElementById("all").innerHTML="Alle: "+totalAll+" Folgen ("+Math.round(totalAll*avgMin/60)+"h)";
  document.getElementById("left").innerHTML="Übrig: "+Math.round(leftAll*avgMin/60)+"h (Auswahl noch "+Math.round(leftSel*avgMin/60)+"h)";
}
updateSummary();
</script>
</body>
</html>